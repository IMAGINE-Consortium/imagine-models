name: ImagineModels C++ CI

on: [push]
 # push:
 #   branches: [ $main, ]
 # pull_request:
 #   branches: [ $main]

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v4
    - name: load submodules
      run: git submodule update --init
    - name: setup
      run: cd c_library && mkdir build 
    - name: cmake
      run: export MKPATH="${PWD}" && cd build && echo "${MKPATH}" && cmake "${MKPATH}"
    - name: make
      run: make install
    - name: ctest
      run: ctest --output-on-failure --use-colour yes